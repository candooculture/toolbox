<!DOCTYPE html>
<html lang="en" style="background-color:#000; color:#fff;">

<head>
  <meta charset="UTF-8" />
  <title>Candoo Clarity</title>

  <!-- Critical background & fallback fonts -->
  <style>
    html, body {
      background-color: #000;
      color: #fff;
      font-family: sans-serif;
      margin: 40px;
      padding: 0;
    }

    h1 {
      font-size: 32px;
      margin-bottom: 10px;
    }

    .intro {
      max-width: 800px;
      margin: 20px 0 30px 0;
      font-size: 16px;
      line-height: 1.5;
      color: #ccc;
    }

    .intro h2 {
      font-size: 22px;
      margin-bottom: 10px;
      color: #13dcff;
    }

    .tabs {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }

    .tab {
      padding: 12px 20px;
      background-color: #111;
      border: 1px solid #333;
      cursor: pointer;
      font-weight: bold;
      font-size: 16px;
      color: #fff;
    }

    .tab.active {
      background-color: #000;
      border-bottom: 2px solid #13dcff;
      color: #13dcff;
    }

    .content {
      border: 1px solid #333;
      padding: 20px;
      border-radius: 8px;
      background-color: #111;
      color: #fff;
    }

    .beta-tag {
      font-size: 12px;
      color: #13dcff;
      margin-left: 6px;
    }
  </style>

  <!-- Load Montserrat without blocking render -->
  <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
  <link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;500;600&display=swap">
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;500;600&display=swap" rel="stylesheet" media="print" onload="this.media='all'">
  <noscript>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;500;600&display=swap">
  </noscript>
</head>

<body style="background-color:#000; color:#fff; font-family: 'Montserrat', sans-serif;">
  <h1>Candoo Clarity</h1>

  <div class="intro">
    <h2>Behind the Numbers: Your Hidden Costs, Revealed</h2>
    <p>In every business, inefficiencies, churn, and leadership gaps are silently bleeding time, money, and momentum.</p>
    <p>We built this suite to surface invisible losses and offer a clear, actionable starting point.</p>
    <p>It‚Äôs not a crystal ball, and it‚Äôs not pretending to be tailored to every company‚Äôs nuance. But it‚Äôs close ‚Äî industry benchmarks, smart assumptions, and proven ROI logic are built in to make the invisible‚Ä¶ visible.</p>
    <p>Use it to test scenarios. To validate instincts. To sense-check strategy. Whether you‚Äôre an owner, an operator, or a leader who‚Äôs had enough of vague problems and fluffy guesses ‚Äî this is your starting line.</p>
  </div>

  <div class="tabs" id="tabs"></div>
  <div class="content" id="contentContainer">Loading...</div>

  <script>
    const calculators = {
      team_efficiency: { name: "üí∏ Payroll Waste", file: "payroll-waste.html" }
    };

    function loadVisibility() {
      const tabsDiv = document.getElementById('tabs');
      const container = document.getElementById('contentContainer');
      tabsDiv.innerHTML = '';

      Object.keys(calculators).forEach((key) => {
        const tab = document.createElement('div');
        tab.className = 'tab';
        tab.innerHTML = calculators[key].name;
        tab.onclick = () => switchTab(key, tab);
        tabsDiv.appendChild(tab);
      });

      const firstTab = tabsDiv.querySelector('.tab');
      if (firstTab) {
        firstTab.classList.add('active');
        switchTab(Object.keys(calculators)[0], firstTab);
      }
    }

    async function switchTab(key, tabEl) {
      document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
      tabEl.classList.add('active');

      const container = document.getElementById('contentContainer');
      container.innerHTML = '<p>Loading...</p>';

      try {
        const response = await fetch(calculators[key].file);
        const html = await response.text();

        // Clean previous scripts
        const scripts = document.querySelectorAll('script[data-injected]');
        scripts.forEach(script => script.remove());

        container.innerHTML = html;

        const tempDiv = document.createElement('div');
        tempDiv.innerHTML = html;
        const newScripts = tempDiv.querySelectorAll('script');

        newScripts.forEach(oldScript => {
          const newScript = document.createElement('script');
          if (oldScript.src) {
            newScript.src = oldScript.src;
          } else {
            newScript.textContent = oldScript.textContent;
          }
          newScript.setAttribute('data-injected', 'true');
          document.body.appendChild(newScript);
        });

      } catch (err) {
        console.error("‚ùå Error loading module:", err);
        container.innerHTML = '<p style="color:red;">Error loading module.</p>';
      }
    }

    window.onload = loadVisibility;
  </script>
</body>

</html>
