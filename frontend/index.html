<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <title>Candoo Clarity</title>

  <!-- Font + speed preconnects -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;500;600&display=swap" rel="stylesheet">

  <style>
    html {
      background-color: #000;
      background-image: url('background.png');
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
    }

    body {
      font-family: 'Montserrat', sans-serif;
      font-size: 16px;
      color: #fff;
      margin: 40px;
      padding: 0;
    }

    h1 {
      font-size: 32px;
      margin-bottom: 10px;
      text-align: center;
    }

    .intro {
      max-width: 800px;
      margin: 20px auto 30px auto;
      font-size: 16px;
      line-height: 1.5;
      color: #fff;
    }

    .intro h2 {
      font-size: 22px;
      margin-bottom: 10px;
      color: #13dcff;
    }

    .tabs {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
      flex-wrap: wrap;
      justify-content: center;
    }

    .tab {
      padding: 12px 20px;
      background-color: #000;
      border: 2px solid #13dcff;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 600;
      font-size: 16px;
      color: #13dcff;
      transition: background-color 0.2s ease-in-out, color 0.2s ease-in-out;
    }

    .tab:hover {
      background-color: #13dcff;
      color: #000;
    }

    .tab.active {
      background-color: #13dcff;
      color: #000;
    }

    .content {
      border: 1px solid #333;
      padding: 20px;
      border-radius: 12px;
      background-color: #111;
      max-width: 900px;
      margin: auto;
    }

    .beta-tag {
      font-size: 12px;
      color: #13dcff;
      margin-left: 6px;
    }

    a {
      color: #13dcff;
    }

    a:hover {
      color: #0fbcd8;
    }
  </style>
</head>

<body>
  <h1>Candoo Clarity</h1>

  <div class="intro">
    <h2>Behind the Numbers: Your Hidden Costs, Revealed</h2>
    <p>In every business, inefficiencies, churn, and leadership gaps are silently bleeding time, money, and momentum.</p>
    <p>We built this suite to surface invisible losses and offer a clear, actionable starting point.</p>
    <p>It‚Äôs not a crystal ball, and it‚Äôs not pretending to be tailored to every company‚Äôs nuance. But it‚Äôs close ‚Äî
      industry benchmarks, smart assumptions, and proven ROI logic are built in to make the invisible‚Ä¶ visible.</p>
    <p>Use it to test scenarios. To validate instincts. To sense-check strategy. Whether you‚Äôre an owner, an operator,
      or a leader who‚Äôs had enough of vague problems and fluffy guesses ‚Äî this is your starting line.</p>
  </div>

  <div class="tabs" id="tabs"></div>
  <div class="content" id="contentContainer">Loading...</div>

  <script>
    const calculators = {
      team_efficiency: { name: "üí∏ Payroll Waste", file: "payroll-waste.html" }
    };

    function loadVisibility() {
      const tabsDiv = document.getElementById('tabs');
      const container = document.getElementById('contentContainer');
      tabsDiv.innerHTML = '';

      Object.keys(calculators).forEach((key) => {
        const tab = document.createElement('div');
        tab.className = 'tab';
        tab.innerHTML = calculators[key].name;
        tab.onclick = () => switchTab(key, tab);
        tabsDiv.appendChild(tab);
      });

      const firstTab = tabsDiv.querySelector('.tab');
      if (firstTab) {
        firstTab.classList.add('active');
        switchTab(Object.keys(calculators)[0], firstTab);
      }
    }

    async function switchTab(key, tabEl) {
      document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
      tabEl.classList.add('active');

      const container = document.getElementById('contentContainer');
      container.innerHTML = '<p>Loading...</p>';

      try {
        const response = await fetch(calculators[key].file);
        const html = await response.text();

        const scripts = document.querySelectorAll('script[data-injected]');
        scripts.forEach(script => script.remove());

        container.innerHTML = html;

        const tempDiv = document.createElement('div');
        tempDiv.innerHTML = html;
        const newScripts = tempDiv.querySelectorAll('script');

        newScripts.forEach(oldScript => {
          const newScript = document.createElement('script');
          if (oldScript.src) {
            newScript.src = oldScript.src;
          } else {
            newScript.textContent = oldScript.textContent;
          }
          newScript.setAttribute('data-injected', 'true');
          document.body.appendChild(newScript);
        });

      } catch (err) {
        console.error("‚ùå Error loading module:", err);
        container.innerHTML = '<p style="color:red;">Error loading module.</p>';
      }
    }

    window.onload = loadVisibility;
  </script>
</body>

</html>
